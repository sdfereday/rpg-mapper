<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mapper</title>
  <link href='css/core.css' rel='stylesheet' type='text/css'>
  <!--<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>-->
</head>

<body>

  <div id="ui">

    <p class="lead">Mapper
      <span>v0.31</span>
    </p>

    <form class="start-form" data-bind="css: { disabled: generated() }">
      <p>
        <strong>Map Options (fill these in before starting):</strong>
      </p>
      <p>Dimensions (in units):</p>
      <div class="node">
        <span>
          Width:
          <input type="text" id="mapWidth" value="9" data-bind="value: width, enable: !generated()" />
        </span>
        <span>
          Height:
          <input type="text" id="mapHeight" value="9" data-bind="value: height, enable: !generated()" />
        </span>
      </div>
      <button data-bind="enable: !generated()" id="generate">Start</button>
    </form>

    <div class="tools" data-bind="css: { enableTools: generated() }">
      <form id="entities">
        <p>
          <strong>Build ROT Foundations?</strong>
        </p>
        <button data-bind="click: generateUsingROT">Generate</button>
        <p>
          <strong>Swap:</strong>
        </p>
        <div class="checkbox">
          <input type="checkbox" id="multi-mode" data-bind="checked: invert, click: changeBlockMode" />
          <label for="multi-mode"></label>
          <span>Swap space and blocks</span>
        </div>
        <p>
          <strong>ROT Mode:</strong>
        </p>
        <span class="radio">
          <input type="radio" id="r-maze" name="rotMode" value="maze" data-bind="checked: rotMode">
          <label for="r-maze">Maze</label>
          <div class="check"></div>
        </span>
        <span class="radio">
          <input type="radio" id="r-room" name="rotMode" value="room" data-bind="checked: rotMode">
          <label for="r-room">Room</label>
          <div class="check"></div>
        </span>
      </form>

      <form id="layers">

        <p>
          <strong>Layers</strong>
        </p>
        <div class="checkbox">
            <input type="checkbox" id="onion-mode" data-bind="checked: onion" />
            <label for="onion-mode"></label>
            <span>Onion</span>
          </div>
          <span class="radio">
            <input type="radio" id="f-layer-1" name="layer" value="0" data-bind="checked: selectedLayer">
            <label for="f-layer-1">Bottom Layer</label>
            <div class="check"></div>
          </span>
          <span class="radio">
            <input type="radio" id="f-layer-2" name="layer" value="1" data-bind="checked: selectedLayer">
            <label for="f-layer-2">Middle Layer</label>
            <div class="check"></div>
          </span>
          <span class="radio">
            <input type="radio" id="f-layer-3" name="layer" value="2" data-bind="checked: selectedLayer">
            <label for="f-layer-3">Top Layer</label>
            <div class="check"></div>
          </span>

      </form>

      <form id="tileTypes">

        <p>
          <strong>Tile Types</strong>
        </p>

        <div data-bind="foreach: allowableTiles">
            <span class="radio">
                <input type="radio" data-bind="attr: { id: id, name: name, value: id }, checked: $root.tileGraphic">
                <label data-bind="attr: { for: id }, text: name">Empty</label>
                <div class="check"></div>
              </span>
        </div>

      </form>

      <form id="tileLinks">

        <p>
          <strong>Tile links</strong>
        </p>

        <span data-bind="foreach: mapExits">
          <div class="exit-tile">
            <span data-bind="text: name"></span>
            <p>
              <strong>Required to unlock:</strong>
            </p>
            <span data-bind="foreach: requires">
              <span data-bind="text: $data"></span>
            </span>
            <p>
              <strong>Available puzzle tiles:</strong>
            </p>
            <span data-bind="foreach: $root.puzzleTiles">
              <div>
                <input type="checkbox" data-bind="checked: $parent.requires, attr: { value: id }" />
                <label data-bind="text: id"></label>
              </div>
            </span>
          </div>
        </span>

      </form>

      <p>
        <strong>Export data</strong>
      </p>
      <button data-bind="click: exportData">Export</button>
      <p>
        <strong>Options</strong>
      </p>
      <div class="checkbox">
        <input type="checkbox" id="swap-mode" data-bind="checked: multiMode, click: changeExportMode" />
        <label for="swap-mode"></label>
        <span>Export as multi-dimensional</span>
      </div>
      <div id="output" contenteditable="true" data-bind="text: exportedData">
        Exported data...
      </div>
    </div>

  </div>

  <div id="map">

    <div id="map-inner">

      <!-- <div class="console">
        <strong>Map console: ...</strong>
        <span>x</span>
      </div> -->

      <div class="dragdealer">

        <div class="handle" id="map-handle">

          <div id="previewers">
            <div id="preview">
              <span data-bind="foreach: grids">
                <span class="grid-outer" data-bind="css: { active: parseInt($index()) === parseInt($parent.selectedLayer()), onion: $parent.onion }">
                  <span class="grid-wrapper" data-bind="foreach: grid">
                      <div class="sq" data-bind="style: positionCSS, css: { occupied: occupied() }, click: clicked">
                        <span data-bind="text: decorType()"></span>
                        <span class="icon" data-bind="style: icon"></span>
                      </div>
                  </span>
                </span>
              </span>
            </div>
          </div>

      </div>

      </div>

    </div>

  </div>

  <!-- required -->
  <script src="require.conf.js"></script>
  <script data-main="main" src="bower_components/requirejs/require.js"></script>

</body>

</html>